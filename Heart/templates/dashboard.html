<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="stylesheet" href="{{url_for('static',filename='css/style.css')}}">
    <title>Prediction</title>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>
  <body>
      <nav class="container">
        <div class="logo">
          <img src="{{url_for('static', filename='symbiosis.png')}}" alt="logo">
        </div>
        <ul>
          <li href = "#">Menu</li>
          <li href = "#">Location</li>
          <li href = "#">About</li>
          <li href = "#">Contact</li>
        </ul>

        <a href="{{url_for('logout')}}"><button class="login sign-btn">logout</button></a>
      </nav>
      <main class="hero container">
        <div class="hero-content">
            <h1>KNOW YOUR HEART'S FUTURE, NOW!</h1>
            <p>
                Discover your heart's future with our innovative
                prediction website. Take control of your health with
                accurate insights into potential heart disease risks. Empower
                yourself to make informed decisions and safeguard your well-being.<br/>
                <p><b>Name: </b> {{user.name }}</p>
            </p>


<!--            <div class="hero-btn">-->
<!--                <button>Predict</button>-->
<!--                <button class="secondary-btn">Accuracy</button>-->
<!--            </div>-->
        </div>
        <div class="hero-image ">
            <img src="{{url_for('static', filename='whatsaap-hearts-unscreen.gif')}}" alt="hero image"/>
        </div>
    </main>
       <div class="container_para">
        <div class="card text-bg-light mb-3" style="max-width: 22rem;">
          <div class="card-header">Parameter info</div>
          <div class="card-body">
<!--            <h5 class="card-title">Parameter 1</h5>-->
              <p>Age: Age of the patient in years</p>
              <p>Sex:
                  <ul>
                     <li style="margin-left: 20px;">0 : Male</li>
                     <li style="margin-left: 20px;">1 : Feale</li>
                  </ul>
              </p>
              <p>Chest Pain Type:
                  <ul>
                    <li style="margin-left: 20px;">0: Typical angina</li>
                    <li style="margin-left: 20px;">1: Atypical angina</li>
                    <li style="margin-left: 20px;">2: Non-anginal pain</li>
                    <li style="margin-left: 20px;">3: Asymptomatic</li>
                  </ul>
              </p>
              <p>trestbps : Resting blood pressure in mm Hg</p>
              <p>chol : Serum cholesterol in mg/dl</p>
          </div>
        </div>
        <div class="card text-bg-light mb-3" style="max-width: 22rem;">
          <div class="card-header">Parameter info</div>
          <div class="card-body">
<!--            <h5 class="card-title">Parameter 2</h5>-->
              <p>fbs(Fasting blood sugar): categorized as above 120 mg/dl </br> (1 = true, 0 = false)</p>
              <p>restecg : Resting ECG
                  <ul>
                     <li style="margin-left: 20px;">0 : Normal </li>
                     <li style="margin-left: 20px;">1: Having ST-T wave abnormality</li>
                     <li style="margin-left: 20px;">2: Showing probable or definite left ventricular hypertrophy</li>
                   </ul>
              </p>
              <p>thalach : Maximum heart rate</p>
              <p>exang : Exercise-induced angina
                  <ul>
                     <li style="margin-left: 20px;">0: no </li>
                     <li style="margin-left: 20px;">1: yes</li>
                   </ul>
              </p>
          </div>
        </div>
        <div class="card text-bg-light mb-3" style="max-width: 22rem;">
          <div class="card-header">Parameter info</div>
          <div class="card-body">
<!--            <h5 class="card-title">Parameter 1</h5>-->
              <p>Oldpeak: ST depression induced by exercise relative to rest</p>
              <p>Slope:	Slope of the peak exercise ST segment
                  <ul>
                      <li style="margin-left: 20px;">0: Upsloping</li>
                      <li style="margin-left: 20px;">1: Flat</li>
                      <li style="margin-left: 20px;">2: Downsloping</li>
                  </ul>
              </p>
              <p>ca : Number of major vessels (0-4) colored by fluoroscopy</p>
              <p>Thal: Thalium stress test result
                  <ul>
                      <li style="margin-left: 20px;">0: Normal</li>
                      <li style="margin-left: 20px;">1: Fixed defect</li>
                      <li style="margin-left: 20px;">2: Reversible defect</li>
                  </ul>
              </p>
          </div>
        </div>
      </div>
      <div class="container">
          <div class = "row">
              <div class = "card" style="width:100%; height:100%; margin-top:50px">
                  <div class="card-header" style="text-align:center">
                      <h1>Welcome, {{ user.name }}!</h1>
                      <p>Your email: {{ user.email }}</p>
                      <a href="{{ url_for('user_input_data') }}" class="btn btn-success">View Your Previous Heart Input Data</a>
                      <h1>Heart Predictor</h1>
                  </div>
                  <div class = "card-body">
                      <form action="/predict" method="post" accept-charset="utf-8">
                          <div class="row">
                              <div class="col-nd-6 form-group" style="text-align:center; margin-right: 100px; margin-left:35px" id="age" >
                                  <label><b>Enter your age : </b></label>
                                  <input class="form-control" id="age" name="age" placeholder="Enter age"></input>
                              </div>
                              <div class="col-nd-6 form-group" style="text-align:center; margin-right: 100px;" id="sex">
                                  <label><b>Enter your sex : </b></label>
                                  <select class="selectpicker form-control" id="sex" name="sex" placeholder="Enter Sex">
                                      <option>0</option>
                                      <option>1</option>
                                  </select>
                              </div>
                              <div class="col-nd-6 form-group" style="text-align:center; margin-right: 100px;" id="cp">
                                  <label><b>Enter your cp : </b></label>
                                  <select class="selectpicker form-control" id="cp" name="restecg" placeholder="Enter electrocardiographic">
                                      <option>0</option>
                                      <option>1</option>
                                      <option>2</option>
                                      <option>3</option>
                                  </select>
                              </div>
                              <div class="col-nd-6 form-group" style="text-align:center; margin-right: 10px;" id="bp">
                                  <label><b>Enter your trestbps : </b></label>
                                  <input type="text" class="form-control" id="bp" name="bp" placeholder="Enter BP"></input>
                              </div>
                          </div>
                          <div class="row">
                              <div class="col-nd-6 form-group" style="text-align:center; margin-right: 100px; margin-left:35px" id="age" >
                                  <label><b>Enter your chol : </b></label>
                                  <input type="text" class="form-control" id="age" name="chol" placeholder="Enter cholestoral"></input>
                              </div>
                              <div class="col-nd-6 form-group" style="text-align:center; margin-right: 100px;" id="sex">
                                  <label><b>Enter your sugar>120 : </b></label>
                                  <select class="selectpicker form-control" id="sex" name="fbs" placeholder="Enter fasting blood sugar>120mg/dl">
                                      <option>0</option>
                                      <option>1</option>
                                  </select>
                              </div>
                              <div class="col-nd-6 form-group" style="text-align:center; margin-right: 100px;" id="cp">
                                  <label><b>Enter your ecg : </b></label>
                                  <select class="selectpicker form-control" id="cp" name="restecg" placeholder="Enter electrocardiographic">
                                      <option>0</option>
                                      <option>1</option>
                                      <option>2</option>
                                  </select>
                              </div>
                              <div class="col-nd-6 form-group" style="text-align:center; margin-right: 10px;" id="bp">
                                  <label><b>Enter your HR : </b></label>
                                  <input type="text" class="form-control" id="bp" name="thalach" placeholder="Enter Heart Heart"></input>
                              </div>
                          </div>
                          <div class="row">
                              <div class="col-nd-6 form-group" style="text-align:center; margin-right: 100px; margin-left:35px" id="age" >
                                  <label><b>Enter your exang : </b></label>
                                  <select class="selectpicker form-control" id="age" name="exang" placeholder="Enter angnia">
                                      <option>0</option>
                                      <option>1</option>
                                  </select>
                              </div>
                              <div class="col-nd-6 form-group" style="text-align:center; margin-right: 100px;" id="sex">
                                  <label><b>Enter your oldpeak : </b></label>
                                  <input type="text" class="form-control" id="sex" name="oldpeak" placeholder="Enter St Depression"></input>
                              </div>
                              <div class="col-nd-6 form-group" style="text-align:center; margin-right: 100px;" id="bp">
                                  <label><b>Enter your slope : </b></label>
                                  <select class="selectpicker form-control" id="bp" name="slope" placeholder="Enter slope">
                                      <option>0</option>
                                      <option>1</option>
                                  </select>
                              </div>
                              <div class="col-nd-6 form-group" style="text-align:center; margin-right: 10px;" id="cp">
                                  <label><b>Enter your ca : </b></label>
                                  <select class="selectpicker form-control" id="cp" name="ca" placeholder="Enter major vessels">
                                      <option>0</option>
                                      <option>1</option>
                                      <option>2</option>
                                      <option>3</option>
                                  </select>
                              </div>
                          </div>
                  <div class="row">
                              <div class="col-md-6 form-group" style="text-align:center; margin-right: 100px; margin-left:35px" id="age" >
                                  <label><b>Enter your thal : </b></label>
                                  <select class="form-control" id="age" name="thal" placeholder="Enter thal">
                                      <option>0</option>
                                      <option>1</option>
                                      <option>2</option>
                                  </select>
                              </div>
                              <div class="col-md-11 form-group">
                                  <button class="btn btn-primary form-control" onclick="send_data()">Predict</button>
                              </div>
                          </div>
                    </form>
                      <br>
                      <div class="col-md-12" style="text-align:center">
                          <h3><span id="prediction"></span></h3>
                      </div>
                  </div>
              </div>
          </div>
      </div>

      <script >
          document.querySelector('form').addEventListener("submit", form_handler);
        function form_handler(event){
            event.preventDefault();
            send_data();
         }

        function send_data(){
            var fd = new FormData(document.querySelector('form'));
            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/predict', true);
            document.getElementById("prediction").innerHTML = "Wait Predicting disease!...";
            xhr.onreadystatechange = function(){
                if(xhr.readyState == XMLHttpRequest.DONE){
                    document.getElementById('prediction').innerHTML="Prediction : " +xhr.responseText;
                }
            };
            xhr.onload = function(){};
            xhr.send(fd);
        }
      </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/paper.js/0.12.17/paper-full.min.js" integrity="sha512-NApOOz1j2Dz1PKsIvg1hrXLzDFd62+J0qOPIhm8wueAnk4fQdSclq6XvfzvejDs6zibSoDC+ipl1dC66m+EoSQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>
